:imagesdir: ./images
[[schedules]]
# Schedules

## Overview

Schedules provide purely time-dependent quantities, similar to climatic loads. Different to other results-producing models, schedules generate variables for sets of dependent models. As such, a schedule is formulated for an object list, which selects a set of objects taking the values provided by the schedule.
For example they are used in the following objects or list of objects:

* **Occupancy rates**, **heat loads**, *clothing factors* in the person load model.
* *Heating/cooling set point temperatures* for thermostat controls
* *Mass flow rates* or *temperature set points* for plant components
* *electrical power rates* for lighting and electrical devices

For example, a schedule defines heating set points `HeatingSetPoint` for specific zones like living rooms. These are selected by an object list named "Living room", which selects objects with the type `Zone` and a certain ID range. Later you will find more about this in more detail.

Within the project file there are two possible ways to describe a schedule: 

* `ScheduleGroups` 
* `AnnualSchedules`. 

[[ex_Schedules]]
.ScheduleGroup Definition
====
[source,xml,indent=0]
----
		<Schedules>
			<ScheduleGroups>
                ...
			</ScheduleGroups>
			<AnnualSchedules>
			    ...
			</AnnualSchedules>
		</Schedules>
----
====

The two options are discussed in <<regularSchedules>> and <<annualSchedules>>. 

Furthermore `Schedules` consist of two different types of data handling:

* *Cyclic* data
* *Non-cyclic* data

*Cyclic data* means that schedule values will be repeated after the end of the schedule period. This means for example that an annual schedule will be run twice if the simulation time will be set to two years. *Cyclic-data* can be defined by * `ScheduleGroups` and `AnnualSchedules`.

Whereas *non-cyclic* data will always be used only once. This is useful if monitored data will be used to set up schedules. Then the simulation needs to be set only for the time span the monitored data is existing. *Non-cyclic* data can only be defined by `AnnualSchedules`


[[regularSchedules]]
## Daily scheme based schedules

:xrefstyle: short 

Regular schedules are defined upon a daily cycle based scheme. Some Parameters need to be defined inside the hereafter specified XML tags.

[[ex_ScheduleGroup]]
.ScheduleGroup Definition
====
[source,xml,indent=0]
----
<ScheduleGroups>
    <ScheduleGroup objectList="Zone">
        <FirstDayOfYear>Mon</FirstDayOfYear>
        <Holidays>100,101,102</Holidays>
        <!-- AllDays constant  -->
        <Schedule type="AllDays">
            ...
    	</Schedule>
    	<Schedule type="WeekDays">
    	    ...
    	</Schedule>
    </ScheduleGroup>
<ScheduleGroups>
----

====

.ObjectList with an Zone linked
====
[source,xml,indent=0]
----
<ObjectLists>
	<ObjectList name="Zone">
		<FilterID>*</FilterID>
		<ReferenceType>Zone</ReferenceType>
	</ObjectList>
</ObjectLists>
----

====

Regular schedules are defined within the XML tag `ScheduleGroup` with an XML attribute named `objectList` that references an `ObjectList` with the specified name (see <<tab_ScheduleGroup>>). Inside the object the XML tags named `FirstDayOfYear`, `Holidays` and several XML Tags named `Schedule` can to be defined. The `Schedule` objects need an XML attribute called `type` with different names for specific day types (see <<tab_ScheduleTypes>>). There shall be no two objects with the same `type`. Upon those `Schedule` objects it is possible to define a schedule for a whole year. Therefore a certain role exists to build schedules. 

### Daily Cycles

At first priority the type `Alldays` will set specified daily schedule values (e.g. Heating Setpoint Temperatures) to all days of the whole year (Priority 0). After this the `type` named `WeekEnd` and `WeekDay` will overwrite the already defined schedule values for only all week days or weekend days (Priority 1). Furthermore the weekdays named `Monday`, `Tuesday`, etc define for which days the schedule values will be overwritten again (Priority 2). This continues with the `type` `Holiday` (Priority 3) for the specified holidays inside the `Holidays` object. So that in the end a final schedule for the whole year can be defined. This can be done for several periods.

As shown, a priority list exists that defines on how to define a yearly schedule based on a daily cycle.

.XML tags that can be definned
[options="header", cols="10%, 60%, 20%, 10%", width="100%"]
|====================
| XML tags | Description| Format |Usage
| Holidays 
a|  List of holiday days, stored in "day of the year", not including leap days. | String | _optional_
| WeekEndDays | Weekend days. | String | _optional_
| FirstDayOfYear 
a| The day type of January 1st (offset of day of the week of the start year.  

* `Mon` - Monday (_default_)
* `Tue` - Tuesday
* `Wed`	- Wednesday
* `Thu`	- Thursday
* `Fri` - Friday
* `Sat`	- Saturday
* `Sun` - Sunday

| String | _optional_

|====================

:xrefstyle: basic 

[[tab_ScheduleGroup]]
.Attribute for the ScheduleGroup
[options="header",cols="15%,65%,^ 10%,^ 10%",width="100%"]
|====================
|Name|Description| Format |Usage
| `objectList` |  References to an object list with the specifed name | string | _required_
|====================

[[tab_ScheduleTypes]]
.Description of the schedule type attribute
[options="header"]
[cols="< 15, ^ 10, < 70"]
[width="100%"]
|====================
| `type` | Priority | Description
| `AllDays`
| 0 | Values will be set to all days of the period
| `WeekEnd` {set:cellbgcolor: #F4F4F4  } 
| 1 | Values will be set to all weekend days of the period
| `WeekDay` | 1 | Values will be set to all week days of the period
| `Monday` {set:cellbgcolor: transparent }  
| 2 | Values will be set to all Mondays of the period
| `Tuesday` | 2 | Values will be set to all Tuesdays of the period
| `Wednesday` | 2 | Values will be set to all Wednesdays of the period
| `Thursday` | 2 | Values will be set to all Thursdays of the period
| `Friday` | 2 | Values will be set to all Fridays of the period
| `Saturday` | 2 | Values will be set to all Saturdays of the period
| `Sunday` | 2 | Values will be set to all Sundays of the period
| `Holiday` {set:cellbgcolor: #F4F4F4 } 
| 3 | Values will be set to all holidays of the period that are specified inside the `holidays` tag
|====================

Flags and options (see section <<IBK_Flag>> for a description of the `IBK:Flag` tag):

[[tab_ScheduleFlags]]
.Description of IBK:Flags that can be used inside the Schedule
[options="header",cols="20%,60%,10%,10%",width="100%"]
|====================
| Name | Description | Default | Usage 
|`EnableCyclicSchedules`|Check schedules to determine minimum distances between steps and adjust MaxTimeStep.|_false_|_optional_
|====================



[options="",cols="50%,50%",width="100%"]
|===
a| image::alldays.png[width=100%]
a| image::mondays.png[width=100%]

a| image::weekdays.png[width=100%]
a| image::week.png[width=100%]

a| image::year.png[width=100%]
|
|===


### Time Shift

Inside the 

.Automatic Time Shift in Daily Cycles to improve simulation speed 
image::ScheduleShift.png[width=80%, scalewidth=12cm]


[[annualSchedules]]
## Annual schedules 

Annual schedules are basically data tables with monotonically increasing X an Y-Values. Annual schedules can be defined as any linear/constant interpolated data tables. For example, hourly values of temperatures or control variables measured during the year can be specified. 

Inside the XML tag `AnnualSchedules` the sub tag `SpaceTypeGroup` with an XML attribute `spaceTypeName` needs to be defined. This defined attribute needs to match to an defined `SpaceType` with the same name. 

[[ex_AnnualSchedule]]
.Definition of an Annual Schedule
====
[source,xml,indent=0]
----

<AnnualSchedules>
    ...
	<SpaceTypeGroup spaceTypeName="Zone">
    	<IBK:LinearSpline name="HeatingSetPointTemperature" interpolation="linear">
    		<X unit="h">0	2183	2184	6576	6577	8760</X>
    		<Y unit="C">20	30		20		30		20		30</Y>
    	</IBK:LinearSpline>	
    	<IBK:LinearSpline name="TotalEnergyProductionPerPerson" interpolation="linear">
    		<X unit="h">		0	2183	2184	6576	6577	8760</X>
    		<Y unit="W/Person">	70	110		70		110		70		110</Y>
    	</IBK:LinearSpline>
    	<IBK:LinearSpline name="EquipmentUtilizationRatio" interpolation="linear">
    		<X unit="h">		0	2183	2184	6576	6577	8760</X>
    		<Y unit="W/Person">	10	20		10		20		10		20</Y>
    	</IBK:LinearSpline>
    </SpaceTypeGroup>
    ...
</AnnualSchedules>

----
====



.Paramaters that can be set for the IBK:LinearSpline
[options="header",cols="20%,60%,^ 10%,^ 10%",width="100%"]
|====================
|Attribute {set:cellbgcolor:transparent} |Description|Format|Usage
| `name` | Specific name that references to the space type the annual schedule will be set for | string | _required_
| `InterpolationMethod` 
a| Specifies the interpolation method between the defined y values.

* `constant` - constant interpolation (values constant during time step) 
* `linear` - linear interpolation (values linear interpolated between time steps)  

| key | _required_
a|

[WARNING]
====
`WrapMethod`

not yet implemented
====

a| Specifies how to treat the values in multi-year simulations 

* `cyclic` - Annual cyclic data
* `continuous` - Continuous data without repetition

| key | _required_

|====================



## Variable list

The variable list describes all names and the  units that can be used inside the schedules.  

[[tab_VariableList]]
.Variable List
[options="header",cols="35%,^ 10%,55%"]
|====================
|Name 
|Unit|Description
|`HeatingSetPointTemperature`|C| Setpoint temperature for heating.
|`CoolingSetPointTemperature`|C| Setpoint temperature for cooling.
|`AirConditionSetPointTemperature`|C|Setpoint temperature for air conditioning.
|`AirConditionSetPointRelativeHumidity`|%|Setpoint relative humidity for air conditioning.
|`AirConditionSetPointMassFlux`|kg/s|Setpoint mass flux for air conditioning.
|`HeatingLoad`|W|Heating load.
|`ThermalLoad`|W|Thermal load (positive or negative).
|`MoistureLoad`|g/h|Moisture load.
|`CoolingPower`|W|Cooling power.
|`LightingPower`|W|Lighting power.
|`DomesticWaterSetpointTemperature`|C|Setpoint temperature for domestic water.
|`DomesticWaterMassFlow`|kg/s|Domestic water demand mass flow for the complete zone (hot water and equipment).
|`ThermalEnergyLossPerPerson`|W/Person|Energy of a single persons activities that is not available as thermal heat.
|`TotalEnergyProductionPerPerson`|W/Person|Total energy production of a single persons body at a certain activity.
|`MoistureReleasePerPerson`|kg/s|Moisture release of a single persons body at a certain activity.
|`CO2EmissionPerPerson`|kg/s|CO2 emission mass flux of a single person at a certain activity.
|`MassFluxRate`|---|Fraction of real mass flux to maximum  mass flux for different day times.
|`PressureHead`|Pa|Supply pressure head of a pump.
|`OccupancyRate`|---|Fraction of real occupancy to maximum  occupancy for different day times.
|`EquipmentUtilizationRatio`|---|Ratio of usage for existing electric equipment.
|`LightingUtilizationRatio`|---|Ratio of usage for lighting.
|`MaximumSolarRadiationIntensity`|W/m2|Maximum solar radiation intensity before shading is activated.
|`UserVentilationAirChangeRate`|1/h|Exchange rate for natural ventilation.
|`UserVentilationComfortAirChangeRate`|1/h|Maximum air change rate = offset for user comfort.
|`UserVentilationMinimumRoomTemperature`|C|Temperature limit over which comfort ventilation is activated.
|`UserVentilationMaximumRoomTemperature`|C|Temperature limit below which comfort ventilation is activated.
|`InfiltrationAirChangeRate`|1/h|Exchange rate for infiltration.
|`ShadingFactor`|---|Shading factor [0...1].

|====================

